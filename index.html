<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº«æ´›ç±³ç…™ç«</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000033;
            cursor: pointer;
        }
        .firework {
            position: absolute;
            width: 100px;
            height: 100px;
            transform: translate(-50%, -50%);
            opacity: 0;
            animation: fade 2s ease-out;
            pointer-events: none;
        }
        @keyframes fade {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.1);
            }
            10% {
                opacity: 1;
            }
            80% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.1);
            }
        }
        
        .sparkle {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: #ffccff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 5px #ffaaff, 0 0 10px #ff66ff;
            opacity: 0;
            pointer-events: none;
        }
        
        @keyframes sparkle {
            0% {
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty));
            }
        }
        .controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
        }
        button {
            background-color: #d980ff;
            border: none;
            color: white;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #b54fff;
        }
        .title {
            position: fixed;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Microsoft JhengHei', 'Comic Sans MS', cursive, sans-serif;
            font-size: 24px;
            text-shadow: 0 0 10px #ff66cc, 0 0 20px #ff66cc;
            z-index: 50;
        }
        .emoji-cursor {
            position: fixed;
            font-size: 24px;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>
    <div class="title">åº«æ´›ç±³ç…™ç«ï¼</div>
    
    <div class="controls">
        <button id="autoBtn">è‡ªå‹•æ”¾ç…™ç«</button>
        <button id="clearBtn">æ¸…é™¤å…¨éƒ¨</button>
        <button id="multipleBtn">æ”¾å‡º5å€‹</button>
    </div>
    
    <div class="emoji-cursor">ğŸŒŸ</div>

    <script>
        // åº«æ´›ç±³åœ–ç‰‡é™£åˆ—
        const kuromiImages = [
            "https://d3gjxtgqyywct8.cloudfront.net/o2o/image/10ce9995-8ea7-4c44-8f20-dc13004b750e.jpg",
            "https://img2.91mai.com/o2o/image/61410c10-68cd-4eb7-a622-7234d249596f.jpg",
            "https://img2.91mai.com/o2o/image/4e6e0e56-9f34-4e7b-a86c-a0828d62576b.jpg",
            "https://img2.91mai.com/o2o/image/e32a25a7-68d1-4337-ab7d-8aff448d528c.jpg",
            "https://img2.91mai.com/o2o/image/6a282c7d-4fd2-4bcc-8faa-ea0ff563473d.jpg",
            "https://img2.91mai.com/o2o/image/74d4472d-f6db-4cff-9864-5b27922d55a3.jpg",
            "https://img2.91mai.com/o2o/image/fb8b0631-eab7-411a-8b7a-b7b3ac9ed266.jpg"
        ];
        
        // è¨­å®šè‡ªå®šç¾©æ»‘é¼ æŒ‡é‡
        const emojiCursor = document.querySelector('.emoji-cursor');
        
        document.addEventListener('mousemove', (e) => {
            emojiCursor.style.left = e.clientX + 'px';
            emojiCursor.style.top = e.clientY + 'px';
        });
        
        // é»æ“Šç”¢ç”Ÿç…™ç«
        document.addEventListener('click', (e) => {
            if (e.target.tagName !== 'BUTTON') {
                createFirework(e.clientX, e.clientY);
            }
        });
        
        // è‡ªå‹•æ”¾ç…™ç«
        let autoFireworkInterval;
        document.getElementById('autoBtn').addEventListener('click', () => {
            if (autoFireworkInterval) {
                clearInterval(autoFireworkInterval);
                autoFireworkInterval = null;
                document.getElementById('autoBtn').textContent = 'è‡ªå‹•æ”¾ç…™ç«';
            } else {
                document.getElementById('autoBtn').textContent = 'åœæ­¢è‡ªå‹•';
                autoFireworkInterval = setInterval(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * (window.innerHeight * 0.8);
                    createFirework(x, y);
                }, 800);
            }
        });
        
        // æ¸…é™¤æ‰€æœ‰ç…™ç«
        document.getElementById('clearBtn').addEventListener('click', () => {
            document.querySelectorAll('.firework').forEach(fw => {
                fw.remove();
            });
        });
        
        // æ”¾å‡ºå¤šå€‹ç…™ç«
        document.getElementById('multipleBtn').addEventListener('click', () => {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * (window.innerHeight * 0.8);
                    createFirework(x, y);
                }, i * 200);
            }
        });

        // å‰µå»ºç…™ç«æ•ˆæœ
        function createFirework(x, y) {
            const firework = document.createElement('img');
            firework.className = 'firework';
            
            // éš¨æ©Ÿé¸æ“‡åº«æ´›ç±³åœ–ç‰‡
            const randomImageIndex = Math.floor(Math.random() * kuromiImages.length);
            firework.src = kuromiImages[randomImageIndex];
            
            // è¨­å®šä½ç½®
            firework.style.left = x + 'px';
            firework.style.top = y + 'px';
            
            // éš¨æ©Ÿå¤§å°
            const size = 50 + Math.random() * 100;
            firework.style.width = size + 'px';
            firework.style.height = size + 'px';
            
            // éš¨æ©Ÿæ—‹è½‰
            const rotation = Math.random() * 360;
            firework.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
            
            // éš¨æ©Ÿå‹•ç•«æŒçºŒæ™‚é–“
            const duration = 1 + Math.random() * 1.5;
            firework.style.animation = `fade ${duration}s ease-out`;
            
            // æ·»åŠ åˆ°é é¢
            document.body.appendChild(firework);
            
            // å‹•ç•«çµæŸå‰ç”Ÿæˆç…™èŠ±æ•ˆæœ
            setTimeout(() => {
                createSparkles(x, y, size);
                
                // ä¹‹å¾Œç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    firework.remove();
                }, 200);
            }, (duration * 1000) - 300);
            
            // æ’­æ”¾ç…™ç«è²éŸ³
            playFireworkSound();
        }
        
        // å‰µå»ºæ¶ˆå¤±æ™‚çš„ç…™èŠ±æ•ˆæœ
        function createSparkles(x, y, size) {
            // ç…™èŠ±æ•¸é‡æ ¹æ“šåŸå§‹åœ–ç‰‡å¤§å°æ±ºå®š
            const sparkleCount = Math.floor(size / 5);
            
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                
                // è¨­å®šä½ç½®ç‚ºç…™ç«ä¸­å¿ƒ
                sparkle.style.left = x + 'px';
                sparkle.style.top = y + 'px';
                
                // éš¨æ©Ÿé¡è‰²
                const hue = Math.floor(Math.random() * 60) + 300; // ç²‰ç´…ç´«è‰²ç³»
                sparkle.style.backgroundColor = `hsl(${hue}, 100%, 70%)`;
                sparkle.style.boxShadow = `0 0 5px hsl(${hue}, 100%, 70%), 0 0 10px hsl(${hue}, 100%, 60%)`;
                
                // è¨­å®šéš¨æ©Ÿæ–¹å‘
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * size / 2;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                // è¨­å®šCSSè®Šæ•¸ä»¥ä¾¿åœ¨å‹•ç•«ä¸­ä½¿ç”¨
                sparkle.style.setProperty('--tx', `${tx}px`);
                sparkle.style.setProperty('--ty', `${ty}px`);
                
                // è¨­å®šå‹•ç•«
                const sparkleDuration = 0.3 + Math.random() * 0.5;
                sparkle.style.animation = `sparkle ${sparkleDuration}s ease-out forwards`;
                
                // æ·»åŠ åˆ°é é¢
                document.body.appendChild(sparkle);
                
                // å‹•ç•«çµæŸå¾Œç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    sparkle.remove();
                }, sparkleDuration * 1000);
            }
        }
        
        // æ’­æ”¾ç…™ç«è²éŸ³
        function playFireworkSound() {
            const sounds = [
                'pop', 'woosh', 'bang'
            ];
            
            // éš¨æ©Ÿé¸æ“‡ä¸€å€‹è²éŸ³æ•ˆæœï¼ˆæ­¤è™•åƒ…æ¨¡æ“¬ï¼Œå¯¦éš›ä¸æœƒæœ‰è²éŸ³ï¼‰
            const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
            console.log('æ’­æ”¾è²éŸ³ï¼š' + randomSound);
        }
        
        // é é¢è¼‰å…¥æ™‚çš„èµ·å§‹ç…™ç«
        window.addEventListener('load', () => {
            setTimeout(() => {
                for (let i = 0; i < 3; i++) {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * (window.innerHeight * 0.7);
                    createFirework(x, y);
                }
            }, 500);
        });
    </script>
</body>
</html>
